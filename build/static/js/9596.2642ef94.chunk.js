"use strict";(self.webpackChunkdefi_exchange_platform=self.webpackChunkdefi_exchange_platform||[]).push([[9596],{21311:(e,t,n)=>{n(71056)},69596:(e,t,n)=>{n.r(t),n.d(t,{W3mPayLoadingView:()=>ie,W3mPayView:()=>K,arbitrumUSDC:()=>Ie,arbitrumUSDT:()=>be,baseETH:()=>ye,baseSepoliaETH:()=>ge,baseUSDC:()=>we,ethereumUSDC:()=>Ee,ethereumUSDT:()=>Ne,getExchanges:()=>de,getIsPaymentInProgress:()=>me,getPayError:()=>pe,getPayResult:()=>le,openPay:()=>ce,optimismUSDC:()=>Ae,optimismUSDT:()=>Pe,pay:()=>ue,polygonUSDC:()=>fe,polygonUSDT:()=>xe,solanaSOL:()=>Se,solanaUSDC:()=>ve,solanaUSDT:()=>_e});var a=n(57528),r=n(37022),s=n(56370),i=n(56440),o=n(17321),c=n(73609),u=n(24657),d=n(7258),l=n(23743),p=n(89268),m=(n(92016),n(84107),n(10477),n(90616),n(42338),n(21311),n(45770),n(94582),n(43760),n(40135),n(84875),n(73777),n(30574)),h=n(76844),y=n(80883),w=n(71769),g=n(79323),E=n(55851),A=n(61139);const I={INVALID_PAYMENT_CONFIG:"INVALID_PAYMENT_CONFIG",INVALID_RECIPIENT:"INVALID_RECIPIENT",INVALID_ASSET:"INVALID_ASSET",INVALID_AMOUNT:"INVALID_AMOUNT",UNKNOWN_ERROR:"UNKNOWN_ERROR",UNABLE_TO_INITIATE_PAYMENT:"UNABLE_TO_INITIATE_PAYMENT",INVALID_CHAIN_NAMESPACE:"INVALID_CHAIN_NAMESPACE",GENERIC_PAYMENT_ERROR:"GENERIC_PAYMENT_ERROR",UNABLE_TO_GET_EXCHANGES:"UNABLE_TO_GET_EXCHANGES",ASSET_NOT_SUPPORTED:"ASSET_NOT_SUPPORTED",UNABLE_TO_GET_PAY_URL:"UNABLE_TO_GET_PAY_URL",UNABLE_TO_GET_BUY_STATUS:"UNABLE_TO_GET_BUY_STATUS"},f={[I.INVALID_PAYMENT_CONFIG]:"Invalid payment configuration",[I.INVALID_RECIPIENT]:"Invalid recipient address",[I.INVALID_ASSET]:"Invalid asset specified",[I.INVALID_AMOUNT]:"Invalid payment amount",[I.UNKNOWN_ERROR]:"Unknown payment error occurred",[I.UNABLE_TO_INITIATE_PAYMENT]:"Unable to initiate payment",[I.INVALID_CHAIN_NAMESPACE]:"Invalid chain namespace",[I.GENERIC_PAYMENT_ERROR]:"Unable to process payment",[I.UNABLE_TO_GET_EXCHANGES]:"Unable to get exchanges",[I.ASSET_NOT_SUPPORTED]:"Asset not supported by the selected exchange",[I.UNABLE_TO_GET_PAY_URL]:"Unable to get payment URL",[I.UNABLE_TO_GET_BUY_STATUS]:"Unable to get buy status"};class v extends Error{get message(){return f[this.code]}constructor(e,t){super(f[e]),this.name="AppKitPayError",this.code=e,this.details=t,Error.captureStackTrace&&Error.captureStackTrace(this,v)}}var N=n(89379),P=n(71786);class b extends Error{}async function x(e,t){const n=function(){const e=P.H.getSnapshot().projectId;return"".concat("https://rpc.walletconnect.org/v1/json-rpc","?projectId=").concat(e)}(),{sdkType:a,sdkVersion:r,projectId:s}=P.H.getSnapshot(),i={jsonrpc:"2.0",id:1,method:e,params:(0,N.A)((0,N.A)({},t||{}),{},{st:a,sv:r,projectId:s})},o=await fetch(n,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}),c=await o.json();if(c.error)throw new b(c.error.message);return c}async function _(e){return(await x("reown_getExchanges",e)).result}const S=["eip155","solana"],T={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};function C(e,t){const{chainNamespace:n,chainId:a}=w.C.parseCaipNetworkId(e),r=T[n];if(!r)throw new Error("Unsupported chain namespace for CAIP-19 formatting: ".concat(n));let s=r.native.assetNamespace,i=r.native.assetReference;"native"!==t&&(s=r.defaultTokenNamespace,i=t);const o="".concat(n,":").concat(a);return"".concat(o,"/").concat(s,":").concat(i)}var k=n(23255);const U="unknown",R=(0,m.BX)({paymentAsset:{network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},recipient:"0x0",amount:0,isConfigured:!1,error:null,isPaymentInProgress:!1,exchanges:[],isLoading:!1,openInNewTab:!0,redirectUrl:void 0,payWithExchange:void 0,currentPayment:void 0,analyticsSet:!1,paymentId:void 0}),D={state:R,subscribe:e=>(0,m.B1)(R,()=>e(R)),subscribeKey:(e,t)=>(0,h.u$)(R,e,t),async handleOpenPay(e){this.resetState(),this.setPaymentConfig(e),this.subscribeEvents(),this.initializeAnalytics(),R.isConfigured=!0,g.E.sendEvent({type:"track",event:"PAY_MODAL_OPEN",properties:{exchanges:R.exchanges,configuration:{network:R.paymentAsset.network,asset:R.paymentAsset.asset,recipient:R.recipient,amount:R.amount}}}),await c.W.open({view:"Pay"})},resetState(){R.paymentAsset={network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},R.recipient="0x0",R.amount=0,R.isConfigured=!1,R.error=null,R.isPaymentInProgress=!1,R.isLoading=!1,R.currentPayment=void 0},setPaymentConfig(e){if(!e.paymentAsset)throw new v(I.INVALID_PAYMENT_CONFIG);try{var t;R.paymentAsset=e.paymentAsset,R.recipient=e.recipient,R.amount=e.amount,R.openInNewTab=null===(t=e.openInNewTab)||void 0===t||t,R.redirectUrl=e.redirectUrl,R.payWithExchange=e.payWithExchange,R.error=null}catch(n){throw new v(I.INVALID_PAYMENT_CONFIG,n.message)}},getPaymentAsset:()=>R.paymentAsset,getExchanges:()=>R.exchanges,async fetchExchanges(){try{R.isLoading=!0;const e=await _({page:0,asset:C(R.paymentAsset.network,R.paymentAsset.asset),amount:R.amount.toString()});R.exchanges=e.exchanges.slice(0,2)}catch(e){throw d.P.showError(f.UNABLE_TO_GET_EXCHANGES),new v(I.UNABLE_TO_GET_EXCHANGES)}finally{R.isLoading=!1}},async getAvailableExchanges(e){try{var t,n;const a=null!==e&&void 0!==e&&e.asset&&null!==e&&void 0!==e&&e.network?C(e.network,e.asset):void 0;return await _({page:null!==(t=null===e||void 0===e?void 0:e.page)&&void 0!==t?t:0,asset:a,amount:null===e||void 0===e||null===(n=e.amount)||void 0===n?void 0:n.toString()})}catch(a){throw new v(I.UNABLE_TO_GET_EXCHANGES)}},async getPayUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const a=Number(t.amount),r=await async function(e){return(await x("reown_getExchangePayUrl",e)).result}({exchangeId:e,asset:C(t.network,t.asset),amount:a.toString(),recipient:"".concat(t.network,":").concat(t.recipient)});return g.E.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{source:"pay",exchange:{id:e},configuration:{network:t.network,asset:t.asset,recipient:t.recipient,amount:a},currentPayment:{type:"exchange",exchangeId:e},headless:n}}),n&&(this.initiatePayment(),g.E.sendEvent({type:"track",event:"PAY_INITIATED",properties:{source:"pay",paymentId:R.paymentId||U,configuration:{network:t.network,asset:t.asset,recipient:t.recipient,amount:a},currentPayment:{type:"exchange",exchangeId:e}}})),r}catch(a){if(a instanceof Error&&a.message.includes("is not supported"))throw new v(I.ASSET_NOT_SUPPORTED);throw new Error(a.message)}},async openPayUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var a;const r=await this.getPayUrl(e.exchangeId,t,n);if(!r)throw new v(I.UNABLE_TO_GET_PAY_URL);const s=null===(a=e.openInNewTab)||void 0===a||a?"_blank":"_self";return u.w.openHref(r.url,s),r}catch(r){throw R.error=r instanceof v?r.message:f.GENERIC_PAYMENT_ERROR,new v(I.UNABLE_TO_GET_PAY_URL)}},subscribeEvents(){R.isConfigured||(l.x.subscribeKey("connections",e=>{e.size>0&&this.handlePayment()}),o.W.subscribeChainProp("accountState",e=>{const t=l.x.hasAnyConnection(y.o.CONNECTOR_ID.WALLET_CONNECT);null!==e&&void 0!==e&&e.caipAddress&&(t?setTimeout(()=>{this.handlePayment()},100):this.handlePayment())}))},async handlePayment(){R.currentPayment={type:"wallet",status:"IN_PROGRESS"};const e=o.W.getActiveCaipAddress();if(!e)return;const{chainId:t,address:n}=w.C.parseCaipAddress(e),a=o.W.state.activeChain;if(!n||!t||!a)return;if(!E.G.getProvider(a))return;const r=o.W.state.activeCaipNetwork;if(r&&!R.isPaymentInProgress)try{this.initiatePayment();const e=o.W.getAllRequestedCaipNetworks(),t=o.W.getAllApprovedCaipNetworkIds();switch(await async function(e){const{paymentAssetNetwork:t,activeCaipNetwork:n,approvedCaipNetworkIds:a,requestedCaipNetworks:r}=e,s=u.w.sortRequestedNetworks(a,r).find(e=>e.caipNetworkId===t);if(!s)throw new v(I.INVALID_PAYMENT_CONFIG);if(s.caipNetworkId===n.caipNetworkId)return;const i=o.W.getNetworkProp("supportsAllNetworks",s.chainNamespace);if(!(null===a||void 0===a?void 0:a.includes(s.caipNetworkId))&&!i)throw new v(I.INVALID_PAYMENT_CONFIG);try{await o.W.switchActiveNetwork(s)}catch(c){throw new v(I.GENERIC_PAYMENT_ERROR,c)}}({paymentAssetNetwork:R.paymentAsset.network,activeCaipNetwork:r,approvedCaipNetworkIds:t,requestedCaipNetworks:e}),await c.W.open({view:"PayLoading"}),a){case y.o.CHAIN.EVM:"native"===R.paymentAsset.asset&&(R.currentPayment.result=await async function(e,t,n){var a,r;if(t!==y.o.CHAIN.EVM)throw new v(I.INVALID_CHAIN_NAMESPACE);if(!n.fromAddress)throw new v(I.INVALID_PAYMENT_CONFIG,"fromAddress is required for native EVM payments.");const s="string"===typeof n.amount?parseFloat(n.amount):n.amount;if(isNaN(s))throw new v(I.INVALID_PAYMENT_CONFIG);const i=null!==(a=null===(r=e.metadata)||void 0===r?void 0:r.decimals)&&void 0!==a?a:18,o=l.x.parseUnits(s.toString(),i);if("bigint"!==typeof o)throw new v(I.GENERIC_PAYMENT_ERROR);const c=await l.x.sendTransaction({chainNamespace:t,to:n.recipient,address:n.fromAddress,value:o,data:"0x"});return null!==c&&void 0!==c?c:void 0}(R.paymentAsset,a,{recipient:R.recipient,amount:R.amount,fromAddress:n})),R.paymentAsset.asset.startsWith("0x")&&(R.currentPayment.result=await async function(e,t){if(!t.fromAddress)throw new v(I.INVALID_PAYMENT_CONFIG,"fromAddress is required for ERC20 EVM payments.");const n=e.asset,a=t.recipient,r=Number(e.metadata.decimals),s=l.x.parseUnits(t.amount.toString(),r);if(void 0===s)throw new v(I.GENERIC_PAYMENT_ERROR);const i=await l.x.writeContract({fromAddress:t.fromAddress,tokenAddress:n,args:[a,s],method:"transfer",abi:k.v.getERC20Abi(n),chainNamespace:y.o.CHAIN.EVM});return null!==i&&void 0!==i?i:void 0}(R.paymentAsset,{recipient:R.recipient,amount:R.amount,fromAddress:n})),R.currentPayment.status="SUCCESS";break;case y.o.CHAIN.SOLANA:R.currentPayment.result=await async function(e,t){if(e!==y.o.CHAIN.SOLANA)throw new v(I.INVALID_CHAIN_NAMESPACE);if(!t.fromAddress)throw new v(I.INVALID_PAYMENT_CONFIG,"fromAddress is required for Solana payments.");const n="string"===typeof t.amount?parseFloat(t.amount):t.amount;if(isNaN(n)||n<=0)throw new v(I.INVALID_PAYMENT_CONFIG,"Invalid payment amount.");try{if(!E.G.getProvider(e))throw new v(I.GENERIC_PAYMENT_ERROR,"No Solana provider available.");const a=await l.x.sendTransaction({chainNamespace:y.o.CHAIN.SOLANA,to:t.recipient,value:n,tokenMint:t.tokenMint});if(!a)throw new v(I.GENERIC_PAYMENT_ERROR,"Transaction failed.");return a}catch(a){if(a instanceof v)throw a;throw new v(I.GENERIC_PAYMENT_ERROR,"Solana payment failed: ".concat(a))}}(a,{recipient:R.recipient,amount:R.amount,fromAddress:n,tokenMint:"native"===R.paymentAsset.asset?void 0:R.paymentAsset.asset}),R.currentPayment.status="SUCCESS";break;default:throw new v(I.INVALID_CHAIN_NAMESPACE)}}catch(s){R.error=s instanceof v?s.message:f.GENERIC_PAYMENT_ERROR,R.currentPayment.status="FAILED",d.P.showError(R.error)}finally{R.isPaymentInProgress=!1}},getExchangeById:e=>R.exchanges.find(t=>t.id===e),validatePayConfig(e){const{paymentAsset:t,recipient:n,amount:a}=e;if(!t)throw new v(I.INVALID_PAYMENT_CONFIG);if(!n)throw new v(I.INVALID_RECIPIENT);if(!t.asset)throw new v(I.INVALID_ASSET);if(void 0===a||null===a||a<=0)throw new v(I.INVALID_AMOUNT)},handlePayWithWallet(){const e=o.W.getActiveCaipAddress();if(!e)return void A.I.push("Connect");const{chainId:t,address:n}=w.C.parseCaipAddress(e),a=o.W.state.activeChain;n&&t&&a?this.handlePayment():A.I.push("Connect")},async handlePayWithExchange(e){try{R.currentPayment={type:"exchange",exchangeId:e};const{network:t,asset:n}=R.paymentAsset,a={network:t,asset:n,amount:R.amount,recipient:R.recipient},r=await this.getPayUrl(e,a);if(!r)throw new v(I.UNABLE_TO_INITIATE_PAYMENT);return R.currentPayment.sessionId=r.sessionId,R.currentPayment.status="IN_PROGRESS",R.currentPayment.exchangeId=e,this.initiatePayment(),{url:r.url,openInNewTab:R.openInNewTab}}catch(t){return R.error=t instanceof v?t.message:f.GENERIC_PAYMENT_ERROR,R.isPaymentInProgress=!1,d.P.showError(R.error),null}},async getBuyStatus(e,t){try{const r=await async function(e){return(await x("reown_getExchangeBuyStatus",e)).result}({sessionId:t,exchangeId:e});var n,a;if("SUCCESS"===r.status||"FAILED"===r.status)g.E.sendEvent({type:"track",event:"SUCCESS"===r.status?"PAY_SUCCESS":"PAY_ERROR",properties:{message:"FAILED"===r.status?u.w.parseError(R.error):void 0,source:"pay",paymentId:R.paymentId||U,configuration:{network:R.paymentAsset.network,asset:R.paymentAsset.asset,recipient:R.recipient,amount:R.amount},currentPayment:{type:"exchange",exchangeId:null===(n=R.currentPayment)||void 0===n?void 0:n.exchangeId,sessionId:null===(a=R.currentPayment)||void 0===a?void 0:a.sessionId,result:r.txHash}}});return r}catch(r){throw new v(I.UNABLE_TO_GET_BUY_STATUS)}},async updateBuyStatus(e,t){try{const n=await this.getBuyStatus(e,t);R.currentPayment&&(R.currentPayment.status=n.status,R.currentPayment.result=n.txHash),"SUCCESS"!==n.status&&"FAILED"!==n.status||(R.isPaymentInProgress=!1)}catch(n){throw new v(I.UNABLE_TO_GET_BUY_STATUS)}},initiatePayment(){R.isPaymentInProgress=!0,R.paymentId=crypto.randomUUID()},initializeAnalytics(){R.analyticsSet||(R.analyticsSet=!0,this.subscribeKey("isPaymentInProgress",e=>{var t;if(null!==(t=R.currentPayment)&&void 0!==t&&t.status&&"UNKNOWN"!==R.currentPayment.status){const e={IN_PROGRESS:"PAY_INITIATED",SUCCESS:"PAY_SUCCESS",FAILED:"PAY_ERROR"}[R.currentPayment.status];g.E.sendEvent({type:"track",event:e,properties:{message:"FAILED"===R.currentPayment.status?u.w.parseError(R.error):void 0,source:"pay",paymentId:R.paymentId||U,configuration:{network:R.paymentAsset.network,asset:R.paymentAsset.asset,recipient:R.recipient,amount:R.amount},currentPayment:{type:R.currentPayment.type,exchangeId:R.currentPayment.exchangeId,sessionId:R.currentPayment.sessionId,result:R.currentPayment.result}}})}}))}};var O;const L=(0,r.AH)(O||(O=(0,a.A)(["\n  wui-separator {\n    margin: var(--apkt-spacing-3) calc(var(--apkt-spacing-3) * -1) var(--apkt-spacing-2)\n      calc(var(--apkt-spacing-3) * -1);\n    width: calc(100% + var(--apkt-spacing-3) * 2);\n  }\n\n  .token-display {\n    padding: var(--apkt-spacing-3) var(--apkt-spacing-3);\n    border-radius: var(--apkt-borderRadius-5);\n    background-color: var(--apkt-tokens-theme-backgroundPrimary);\n    margin-top: var(--apkt-spacing-3);\n    margin-bottom: var(--apkt-spacing-3);\n  }\n\n  .token-display wui-text {\n    text-transform: none;\n  }\n\n  wui-loading-spinner {\n    padding: var(--apkt-spacing-2);\n  }\n"])));var M,W,G,Y,V,B,F,H,q,z,j=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let K=class extends r.WF{constructor(){var e;super(),this.unsubscribe=[],this.amount="",this.tokenSymbol="",this.networkName="",this.exchanges=D.state.exchanges,this.isLoading=D.state.isLoading,this.loadingExchangeId=null,this.connectedWalletInfo=null===(e=o.W.getAccountData())||void 0===e?void 0:e.connectedWalletInfo,this.initializePaymentDetails(),this.unsubscribe.push(D.subscribeKey("exchanges",e=>this.exchanges=e)),this.unsubscribe.push(D.subscribeKey("isLoading",e=>this.isLoading=e)),this.unsubscribe.push(o.W.subscribeChainProp("accountState",e=>{this.connectedWalletInfo=null===e||void 0===e?void 0:e.connectedWalletInfo})),D.fetchExchanges()}get isWalletConnected(){const e=o.W.getAccountData();return"connected"===(null===e||void 0===e?void 0:e.status)}render(){return(0,r.qy)(M||(M=(0,a.A)(['\n      <wui-flex flexDirection="column">\n        <wui-flex flexDirection="column" .padding=',' gap="3">\n          ','\n\n          <wui-flex flexDirection="column" gap="3">\n            '," ","\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),["0","4","4","4"],this.renderPaymentHeader(),this.renderPayWithWallet(),this.renderExchangeOptions())}initializePaymentDetails(){const e=D.getPaymentAsset();this.networkName=e.network,this.tokenSymbol=e.metadata.symbol,this.amount=D.state.amount.toString()}renderPayWithWallet(){return function(e){const{chainNamespace:t}=w.C.parseCaipNetworkId(e);return S.includes(t)}(this.networkName)?(0,r.qy)(G||(G=(0,a.A)(['<wui-flex flexDirection="column" gap="3">\n        ','\n      </wui-flex>\n      <wui-separator text="or"></wui-separator>'])),this.isWalletConnected?this.renderConnectedView():this.renderDisconnectedView()):(0,r.qy)(W||(W=(0,a.A)([""])))}renderPaymentHeader(){let e=this.networkName;if(this.networkName){const t=o.W.getAllRequestedCaipNetworks().find(e=>e.caipNetworkId===this.networkName);t&&(e=t.name)}return(0,r.qy)(Y||(Y=(0,a.A)(['\n      <wui-flex flexDirection="column" alignItems="center">\n        <wui-flex alignItems="center" gap="2">\n          <wui-text variant="h1-regular" color="primary">','</wui-text>\n          <wui-flex class="token-display" alignItems="center" gap="1">\n            <wui-text variant="md-medium" color="primary">\n              ',"\n            </wui-text>\n            ","\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),this.amount||"0.0000",this.tokenSymbol||"Unknown Asset",e?(0,r.qy)(V||(V=(0,a.A)(['\n                  <wui-text variant="sm-medium" color="secondary">\n                    on ',"\n                  </wui-text>\n                "])),e):"")}renderConnectedView(){var e,t;const n=(null===(e=this.connectedWalletInfo)||void 0===e?void 0:e.name)||"connected wallet";return(0,r.qy)(B||(B=(0,a.A)(["\n      <wui-list-item\n        @click=","\n        ?chevron=","\n        ?fullSize=","\n        ?rounded=",'\n        data-testid="wallet-payment-option"\n        imageSrc=','\n      >\n        <wui-text variant="lg-regular" color="primary">Pay with ','</wui-text>\n      </wui-list-item>\n\n      <wui-list-item\n        icon="power"\n        ?rounded=','\n        iconColor="error"\n        @click=','\n        data-testid="disconnect-button"\n        ?chevron=','\n      >\n        <wui-text variant="lg-regular" color="secondary">Disconnect</wui-text>\n      </wui-list-item>\n    '])),this.onWalletPayment,!0,!0,!0,(0,i.J)(null===(t=this.connectedWalletInfo)||void 0===t?void 0:t.icon),n,!0,this.onDisconnect,!1)}renderDisconnectedView(){return(0,r.qy)(F||(F=(0,a.A)(['<wui-list-item\n      variant="icon"\n      iconVariant="overlay"\n      icon="wallet"\n      ?rounded=',"\n      @click=","\n      ?chevron=",'\n      data-testid="wallet-payment-option"\n    >\n      <wui-text variant="lg-regular" color="primary">Pay from wallet</wui-text>\n    </wui-list-item>'])),!0,this.onWalletPayment,!0)}renderExchangeOptions(){return this.isLoading?(0,r.qy)(H||(H=(0,a.A)(['<wui-flex justifyContent="center" alignItems="center">\n        <wui-spinner size="md"></wui-spinner>\n      </wui-flex>']))):0===this.exchanges.length?(0,r.qy)(q||(q=(0,a.A)(['<wui-flex justifyContent="center" alignItems="center">\n        <wui-text variant="md-medium" color="primary">No exchanges available</wui-text>\n      </wui-flex>']))):this.exchanges.map(e=>(0,r.qy)(z||(z=(0,a.A)(["\n        <wui-list-item\n          @click=",'\n          data-testid="exchange-option-','"\n          ?chevron=',"\n          ?disabled=","\n          ?loading=","\n          imageSrc=",'\n        >\n          <wui-flex alignItems="center" gap="3">\n            <wui-text flexGrow="1" variant="md-medium" color="primary"\n              >Pay with ',' <wui-spinner size="sm" color="secondary"></wui-spinner\n            ></wui-text>\n          </wui-flex>\n        </wui-list-item>\n      '])),()=>this.onExchangePayment(e.id),e.id,!0,null!==this.loadingExchangeId,this.loadingExchangeId===e.id,(0,i.J)(e.imageUrl),e.name))}onWalletPayment(){D.handlePayWithWallet()}async onExchangePayment(e){try{this.loadingExchangeId=e;const t=await D.handlePayWithExchange(e);t&&(await c.W.open({view:"PayLoading"}),u.w.openHref(t.url,t.openInNewTab?"_blank":"_self"))}catch(t){console.error("Failed to pay with exchange",t),d.P.showError("Failed to pay with exchange")}finally{this.loadingExchangeId=null}}async onDisconnect(e){e.stopPropagation();try{await l.x.disconnect()}catch(t){console.error("Failed to disconnect"),d.P.showError("Failed to disconnect")}}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}};K.styles=L,j([(0,s.wk)()],K.prototype,"amount",void 0),j([(0,s.wk)()],K.prototype,"tokenSymbol",void 0),j([(0,s.wk)()],K.prototype,"networkName",void 0),j([(0,s.wk)()],K.prototype,"exchanges",void 0),j([(0,s.wk)()],K.prototype,"isLoading",void 0),j([(0,s.wk)()],K.prototype,"loadingExchangeId",void 0),j([(0,s.wk)()],K.prototype,"connectedWalletInfo",void 0),K=j([(0,p.EM)("w3m-pay-view")],K);var Z,J=n(36141),X=n(25015),$=n(1348);n(27667);const Q=(0,r.AH)(Z||(Z=(0,a.A)(["\n  :host {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n\n  wui-flex:first-child:not(:only-child) {\n    position: relative;\n  }\n\n  wui-loading-thumbnail {\n    position: absolute;\n  }\n"])));var ee,te,ne,ae,re,se=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let ie=class extends r.WF{constructor(){super(),this.loadingMessage="",this.subMessage="",this.paymentState="in-progress",this.paymentState=D.state.isPaymentInProgress?"in-progress":"completed",this.updateMessages(),this.setupSubscription(),this.setupExchangeSubscription()}disconnectedCallback(){clearInterval(this.exchangeSubscription)}render(){return(0,r.qy)(ee||(ee=(0,a.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="9"\n      >\n        <wui-flex justifyContent="center" alignItems="center"> ',' </wui-flex>\n        <wui-flex flexDirection="column" alignItems="center" gap="2">\n          <wui-text align="center" variant="lg-medium" color="primary">\n            ','\n          </wui-text>\n          <wui-text align="center" variant="lg-regular" color="secondary">\n            ',"\n          </wui-text>\n        </wui-flex>\n      </wui-flex>\n    "])),["7","5","5","5"],this.getStateIcon(),this.loadingMessage,this.subMessage)}updateMessages(){var e;switch(this.paymentState){case"completed":this.loadingMessage="Payment completed",this.subMessage="Your transaction has been successfully processed";break;case"error":this.loadingMessage="Payment failed",this.subMessage="There was an error processing your transaction";break;default:"exchange"===(null===(e=D.state.currentPayment)||void 0===e?void 0:e.type)?(this.loadingMessage="Payment initiated",this.subMessage="Please complete the payment on the exchange"):(this.loadingMessage="Awaiting payment confirmation",this.subMessage="Please confirm the payment transaction in your wallet")}}getStateIcon(){switch(this.paymentState){case"completed":return this.successTemplate();case"error":return this.errorTemplate();default:return this.loaderTemplate()}}setupExchangeSubscription(){var e;"exchange"===(null===(e=D.state.currentPayment)||void 0===e?void 0:e.type)&&(this.exchangeSubscription=setInterval(async()=>{var e,t;const n=null===(e=D.state.currentPayment)||void 0===e?void 0:e.exchangeId,a=null===(t=D.state.currentPayment)||void 0===t?void 0:t.sessionId;var r;n&&a&&(await D.updateBuyStatus(n,a),"SUCCESS"===(null===(r=D.state.currentPayment)||void 0===r?void 0:r.status)&&clearInterval(this.exchangeSubscription))},4e3))}setupSubscription(){D.subscribeKey("isPaymentInProgress",e=>{var t;e||"in-progress"!==this.paymentState||(D.state.error||null===(t=D.state.currentPayment)||void 0===t||!t.result?this.paymentState="error":this.paymentState="completed",this.updateMessages(),setTimeout(()=>{"disconnected"!==l.x.state.status&&c.W.close()},3e3))}),D.subscribeKey("error",e=>{e&&"in-progress"===this.paymentState&&(this.paymentState="error",this.updateMessages())})}loaderTemplate(){const e=J.W.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4,n=this.getPaymentIcon();return(0,r.qy)(te||(te=(0,a.A)(['\n      <wui-flex justifyContent="center" alignItems="center" style="position: relative;">\n        ',"\n        <wui-loading-thumbnail radius=","></wui-loading-thumbnail>\n      </wui-flex>\n    "])),n?(0,r.qy)(ne||(ne=(0,a.A)(['<wui-wallet-image size="lg" imageSrc=',"></wui-wallet-image>"])),n):null,9*t)}getPaymentIcon(){const e=D.state.currentPayment;if(e){if("exchange"===e.type){const t=e.exchangeId;if(t){const e=D.getExchangeById(t);return null===e||void 0===e?void 0:e.imageUrl}}if("wallet"===e.type){var t;const e=null===(t=o.W.getAccountData())||void 0===t||null===(t=t.connectedWalletInfo)||void 0===t?void 0:t.icon;if(e)return e;const n=o.W.state.activeChain;if(!n)return;const a=X.a.getConnectorId(n);if(!a)return;const r=X.a.getConnectorById(a);if(!r)return;return $.$.getConnectorImage(r)}}}successTemplate(){return(0,r.qy)(ae||(ae=(0,a.A)(['<wui-icon size="xl" color="success" name="checkmark"></wui-icon>'])))}errorTemplate(){return(0,r.qy)(re||(re=(0,a.A)(['<wui-icon size="xl" color="error" name="close"></wui-icon>'])))}};ie.styles=Q,se([(0,s.wk)()],ie.prototype,"loadingMessage",void 0),se([(0,s.wk)()],ie.prototype,"subMessage",void 0),se([(0,s.wk)()],ie.prototype,"paymentState",void 0),ie=se([(0,p.EM)("w3m-pay-loading-view")],ie);const oe=3e5;async function ce(e){return D.handleOpenPay(e)}async function ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe;if(t<=0)throw new v(I.INVALID_PAYMENT_CONFIG,"Timeout must be greater than 0");try{await ce(e)}catch(n){if(n instanceof v)throw n;throw new v(I.UNABLE_TO_INITIATE_PAYMENT,n.message)}return new Promise((e,n)=>{let a=!1;const r=setTimeout(()=>{a||(a=!0,u(),n(new v(I.GENERIC_PAYMENT_ERROR,"Payment timeout")))},t);function s(){if(a)return;const t=D.state.currentPayment,n=D.state.error,s=D.state.isPaymentInProgress;return"SUCCESS"===(null===t||void 0===t?void 0:t.status)?(a=!0,u(),clearTimeout(r),void e({success:!0,result:t.result})):"FAILED"===(null===t||void 0===t?void 0:t.status)?(a=!0,u(),clearTimeout(r),void e({success:!1,error:n||"Payment failed"})):void(!n||s||t||(a=!0,u(),clearTimeout(r),e({success:!1,error:n})))}const i=he("currentPayment",s),o=he("error",s),c=he("isPaymentInProgress",s),u=(d=[i,o,c],()=>{d.forEach(e=>{try{e()}catch(t){}})});var d;s()})}function de(){return D.getExchanges()}function le(){var e;return null===(e=D.state.currentPayment)||void 0===e?void 0:e.result}function pe(){return D.state.error}function me(){return D.state.isPaymentInProgress}function he(e,t){return D.subscribeKey(e,t)}const ye={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},we={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},ge={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Ee={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ae={network:"eip155:10",asset:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ie={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},fe={network:"eip155:137",asset:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},ve={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ne={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Pe={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},be={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},xe={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},_e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Se={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}}},90616:(e,t,n)=>{var a,r=n(57528),s=n(37022),i=n(56370),o=n(56440),c=(n(58565),n(39446)),u=n(37845);const d=(0,n(89406).AH)(a||(a=(0,r.A)(["\n  :host {\n    position: relative;\n  }\n\n  button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: transparent;\n    padding: ",";\n  }\n\n  /* -- Colors --------------------------------------------------- */\n  button[data-type='accent'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='neutral'][data-variant='primary'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='neutral'][data-variant='secondary'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='success'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='error'] wui-icon {\n    color: ",";\n  }\n\n  /* -- Sizes --------------------------------------------------- */\n  button[data-size='xs'] {\n    width: 16px;\n    height: 16px;\n\n    border-radius: ",";\n  }\n\n  button[data-size='sm'] {\n    width: 20px;\n    height: 20px;\n    border-radius: ",";\n  }\n\n  button[data-size='md'] {\n    width: 24px;\n    height: 24px;\n    border-radius: ",";\n  }\n\n  button[data-size='lg'] {\n    width: 28px;\n    height: 28px;\n    border-radius: ",";\n  }\n\n  button[data-size='xs'] wui-icon {\n    width: 8px;\n    height: 8px;\n  }\n\n  button[data-size='sm'] wui-icon {\n    width: 12px;\n    height: 12px;\n  }\n\n  button[data-size='md'] wui-icon {\n    width: 16px;\n    height: 16px;\n  }\n\n  button[data-size='lg'] wui-icon {\n    width: 20px;\n    height: 20px;\n  }\n\n  /* -- Hover --------------------------------------------------- */\n  @media (hover: hover) {\n    button[data-type='accent']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-variant='primary'][data-type='neutral']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-variant='secondary'][data-type='neutral']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-type='success']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-type='error']:hover:enabled {\n      background-color: ",";\n    }\n  }\n\n  /* -- Focus --------------------------------------------------- */\n  button:focus-visible {\n    box-shadow: 0 0 0 4px ",";\n  }\n\n  /* -- Properties --------------------------------------------------- */\n  button[data-full-width='true'] {\n    width: 100%;\n  }\n\n  :host([fullWidth]) {\n    width: 100%;\n  }\n\n  button[disabled] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),e=>{let{spacing:t}=e;return t[1]},e=>{let{tokens:t}=e;return t.core.iconAccentPrimary},e=>{let{tokens:t}=e;return t.theme.iconInverse},e=>{let{tokens:t}=e;return t.theme.iconDefault},e=>{let{tokens:t}=e;return t.core.iconSuccess},e=>{let{tokens:t}=e;return t.core.iconError},e=>{let{borderRadius:t}=e;return t[1]},e=>{let{borderRadius:t}=e;return t[1]},e=>{let{borderRadius:t}=e;return t[2]},e=>{let{borderRadius:t}=e;return t[2]},e=>{let{tokens:t}=e;return t.core.foregroundAccent010},e=>{let{tokens:t}=e;return t.theme.foregroundSecondary},e=>{let{tokens:t}=e;return t.theme.foregroundSecondary},e=>{let{tokens:t}=e;return t.core.backgroundSuccess},e=>{let{tokens:t}=e;return t.core.backgroundError},e=>{let{tokens:t}=e;return t.core.foregroundAccent020});var l,p=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let m=class extends s.WF{constructor(){super(...arguments),this.icon="card",this.variant="primary",this.type="accent",this.size="md",this.iconSize=void 0,this.fullWidth=!1,this.disabled=!1}render(){return(0,s.qy)(l||(l=(0,r.A)(["<button\n      data-variant=","\n      data-type=","\n      data-size=","\n      data-full-width=","\n      ?disabled=",'\n    >\n      <wui-icon color="inherit" name='," size=","></wui-icon>\n    </button>"])),this.variant,this.type,this.size,this.fullWidth,this.disabled,this.icon,(0,o.J)(this.iconSize))}};m.styles=[c.W5,c.fD,d],p([(0,i.MZ)()],m.prototype,"icon",void 0),p([(0,i.MZ)()],m.prototype,"variant",void 0),p([(0,i.MZ)()],m.prototype,"type",void 0),p([(0,i.MZ)()],m.prototype,"size",void 0),p([(0,i.MZ)()],m.prototype,"iconSize",void 0),p([(0,i.MZ)({type:Boolean})],m.prototype,"fullWidth",void 0),p([(0,i.MZ)({type:Boolean})],m.prototype,"disabled",void 0),m=p([(0,u.E)("wui-icon-button")],m)}}]);
//# sourceMappingURL=9596.2642ef94.chunk.js.map